<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Leaderboard - Nachnamen-Duell</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            margin-top: 50px; 
        }
        /* Styling für die Tabelle */
        table {
            margin: 0 auto; /* Zentriert die Tabelle in der Mitte der Seite */
            border-collapse: collapse; /* Macht aus doppelten Rahmenlinien eine einfache, saubere Linie */
            width: 50%;
            min-width: 300px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 12px;
            text-align: center;
        }
        th {
            background-color: #f4f4f4; /* Leicht grauer Hintergrund für die Überschriften */
        }
    </style>
</head>
<body>
    <h1>Leaderboard</h1>
    <p>Wer hat den längsten Nachnamen?</p>

    <table>
        <thead>
            <tr>
                <th>Platz</th>
                <th>Name</th>
                <th>Stimmen</th>
            </tr>
        </thead>
        <tbody id="leaderboard-body">
 
        </tbody>
    </table>

    <br><br>
    <a href="index.html">Zurück zur Abstimmung</a>

    <script>
        // Diese Funktion lädt die Daten und baut die Tabelle auf
        async function loadLeaderboard() {
            try {
                // Daten vom Backend holen
                const response = await fetch('/leaderboard');
                const personen = await response.json();
                
                // Den Tabellenkörper im HTML finden
                const tbody = document.getElementById('leaderboard-body');
                
                // Für jede Person in der Liste eine neue Zeile bauen
                personen.forEach((person, index) => {
                    // Eine neue Tabellenzeile (tr) erstellen
                    const tr = document.createElement('tr');
                    
                    // Den Inhalt der Zeile festlegen (Platz, Name, Stimmen)
                    tr.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${person.vorname} ${person.nachname}</td>
                        <td>${person.votes}</td>
                    `;
                    
                    // Die fertige Zeile in die Tabelle einfügen
                    tbody.appendChild(tr);
                });

            } catch (error) {
                console.error("Fehler beim Laden des Leaderboards:", error);
            }
        }

        // Funktion direkt aufrufen, wenn die Seite geladen wird
        loadLeaderboard();
    </script>

</body>
</html>